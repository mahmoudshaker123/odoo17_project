<odoo>
    <data>
        <record id="task_management_tree_view" model="ir.ui.view">
            <field name="name">task management tree</field>
            <field name="model">task.management</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="seq_number"/>
                    <field name="date"/>
                    <field name="employee"/>
                    <field name="state" widget="badge" decoration-success="state == 'done'" decoration-warning="state == 'in_progress'" decoration-info="state == 'draft'"/>
                    <field name="deadline" widget="badge" decoration-danger="deadline &lt; current_date"/>
                </tree>
            </field>
        </record>

        <record id="task_management_form_view" model="ir.ui.view">
        <field name="name">task management form</field>
        <field name="model">task.management</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <header>
                        <button name="action_draft" type="object" class="btn-primary" string="Draft"
                                invisible="state in ('draft','done')"/>
                        <button name="action_in_progress" type="object" class="btn-secondary" string="In Progress"
                                invisible="state !='draft'"/>
                        <button name="action_done" type="object" class="btn-success" string="Done"
                                invisible="state!='in_progress'"/>
                        <field name="state" widget="statusbar"/>


                    </header>

                    <div class="oe_title">
                        <label for="seq_number"/>
                        <h1>
                            <field name="seq_number"/>
                        </h1>

                        <label for="name"/>
                        <h3>
                            <field name="name" readonly="state == 'done'"/>
                        </h3>

                    </div>

                    <group>
                        <group>
                             <field name="employee"/>
                             <field name="assignees" widget="many2many_tags"/>
                        </group>
                        <group>
                            <field name="date"/>
                            <field name="deadline"/>

                        </group>
                    </group>
                    <notebook>
                            <page string="Description">
                                <field name="description"/>
                            </page>
                            <page string="Extra Info">
                                <field name="extra_info"/>
                            </page>
                        </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
        </record>

        <record id="task_management_view_search" model="ir.ui.view">
        <field name="name">task management search</field>
        <field name="model">task.management</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="state"/>

                <filter name="draft" string="New" domain="[('state','=','draft')]" />
                <filter name="in_progress" string="In Progress" domain="[('state','=','in_progress')]" />
                <filter name="done" string="Done" domain="[('state','=','done')]" />


                <filter name="employee" string="Employee" context="{'group_by':'employee'}" />
            </search>
        </field>
    </record>



        <record id="task_management_action" model="ir.actions.act_window">
            <field name="name">Task Management</field>
            <field name="res_model">task.management</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="task_set_in_progress_server_action" model="ir.actions.server">
            <field name="name">Confirm</field>
            <field name="model_id" ref="model_task_management"/>
            <field name="binding_model_id" ref="model_task_management"/>
            <field name="state">code</field>
            <field name="code">
                action = records.action_change_in_progress()
            </field>

        </record>

        <record id="task_set_done_server_action" model="ir.actions.server">
            <field name="name">Done</field>
            <field name="model_id" ref="model_task_management"/>
            <field name="binding_model_id" ref="model_task_management"/>
            <field name="state">code</field>
            <field name="code">
                action = records.action_change_done()
            </field>

        </record>

        <menuitem
            id="menu_task_management_view"
            name="Task Management"
            action="task_management_action"
            parent="hr.menu_config_employee"
            sequence="100"/>



    </data>
</odoo>